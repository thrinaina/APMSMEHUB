<!-- Loader -->
<app-loader *ngIf="isLoading"></app-loader>

<div class="dialog-container">
  <div class="dialog-header">
    <span>{{ 'Admin.ProfileApproval'| translate }}</span>
    <mat-icon (click)="onNoClick()">close</mat-icon>
  </div>

  <div class="dialog-body">
    <form [formGroup]="approvalForm">
      <div class="row g-3">

        <div class="col-md-12 d-flex flex-column row-gap-10">

          <div class="d-flex flex-column">

            <div class="d-flex my-2 justify-content-between ">
              <div class="d-flex flex-column gap-2">
                <span class="text-12">{{'Admin.UdyamRegistrationNumber' | translate}}</span>
                <span class="text-14 ms-3">{{data.profileData.udyamRegistrationNo }}</span>
              </div>
              <div>
                <div *ngIf="data.profileData.enterpriseStatus == 'PENDING'" class="pending-chip">
                  {{( 'Common.'+data.profileData.enterpriseStatus | titlecase) | translate}}
                </div>
                <div *ngIf="data.profileData.enterpriseStatus == 'REJECTED'" class="rejected-chip">
                  {{ ('Common.'+data.profileData.enterpriseStatus | titlecase) | translate}}
                </div>
                <div *ngIf="data.profileData.enterpriseStatus == 'ACCEPTED'" class="accepet-chip">
                  {{ ('Common.'+data.profileData.enterpriseStatus | titlecase) | translate}}
                </div>
              </div>
            </div>

            <div class="d-flex my-3 flex-column gap-2">
              <span class="text-12">{{'Admin.EnterpriseName' | translate}}</span>
              <span class="text-18 ms-3">{{data.profileData.enterpriseName}}</span>
            </div>

            <div class="d-flex col-gap-30">
              <div class="d-flex my-2 flex-column gap-2">
                <span class="text-12">{{'Admin.EmailId' | translate}} </span>
                <span class="text-14 ms-3">{{data.profileData.emailId}}</span>
              </div>

              <div class="d-flex my-2 flex-column gap-2">
                <span class="text-12">{{'Admin.MobileNumber' | translate}} </span>
                <span class="text-14 ms-3">{{data.profileData.mobileNumber}}</span>
              </div>
            </div>
            <div class="d-flex my-2 flex-column gap-2">
              <span class="text-12">{{'Admin.WebsiteLink' | translate}} </span>
              <a class="text-14 ms-3" [href]="data?.profileData?.website" target="_blank">
                {{ data?.profileData?.website }}
              </a>
            </div>

            <div
              *ngIf="data.profileData.enterpriseStatus == 'ACCEPTED' || data.profileData.enterpriseStatus == 'REJECTED'"
              class="d-flex my-2 flex-column gap-2">
              <span class="text-12">{{ 'Common.Reasonforapproval' | translate }} </span>
              <span class="text-14 ms-3">{{data.profileData.enterpriseStatusRemarks}}</span>
            </div>

            <div
              *ngIf="data.profileData.enterpriseStatus == 'ACCEPTED' || data.profileData.enterpriseStatus == 'REJECTED'"
              class="d-flex my-2 flex-column gap-2">
              <span class="text-12" [ngClass]="{
                  'text-success': data.profileData.enterpriseStatus?.toLowerCase() === 'accepted',
                  'text-danger': data.profileData.enterpriseStatus?.toLowerCase() === 'rejected'
                }">
                {{ ('Common.'+data.profileData.enterpriseStatus | titlecase ) | translate }}
                {{ 'Common.Remarks' | translate }}
              </span>

              <span class="text-14 ms-3">{{data.profileData.enterpriseStatusRemarks}}</span>
            </div>
          </div>

          <!-- Remarks -->
          <div
            *ngIf="(data.profileData.enterpriseStatus == 'ACCEPTED' && data.profileData.enterpriseStatus == 'REJECTED') || data.profileData.enterpriseStatus == 'PENDING'"
            class="col-md-12 mt-10">
            <mat-form-field appearance="outline" class="w-100" floatLabel="always">
              <mat-label>{{'Admin.StatusRemarks' | translate}}</mat-label>
              <textarea matInput type="text" rows="3" name="enterpriseStatusRemarks"
                formControlName="enterpriseStatusRemarks"></textarea>
            </mat-form-field>
            <div *ngIf="isSavedForm && approvalForm.invalid" class="error-div">
              <div *ngIf="approvalForm.controls['enterpriseStatusRemarks'].errors?.['required']">
                {{'Admin.StatusRemarks' | translate}} {{'Common.RequiredError' | translate}}
              </div>
              <div *ngIf="approvalForm.controls['enterpriseStatusRemarks'].errors?.['maxlength']">
                {{'Admin.StatusRemarks' | translate}} {{'Common.MaxLengthError' | translate}}
                {{approvalForm.controls['enterpriseStatusRemarks'].errors?.['maxlength'].requiredLength}}
              </div>
              <div *ngIf="approvalForm.controls['enterpriseStatusRemarks'].errors?.['pattern']">
                {{'Common.Invalid' | translate}} {{'Admin.StatusRemarks' | translate}}
              </div>
            </div>
          </div>
        </div>
      </div>
    </form>
  </div>

  <div *ngIf="(data.profileData.enterpriseStatus == 'ACCEPTED' && data.profileData.enterpriseStatus == 'REJECTED') || data.profileData.enterpriseStatus == 'PENDING'"
    class="dialog-footer">
    <button type="button" class="btn btn-outline-primary" (click)="saveRequest('REJECTED')">{{'Common.Reject' |
      translate}}</button>
    <button type="button" class="btn btn-primary" (click)="saveRequest('ACCEPTED')">{{'Common.Approve' |
      translate}}</button>
  </div>
</div>
